<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Version Gratuite - Claque Doigts</title>
    <link rel="stylesheet" href="https://use.typekit.net/wdg2wjk.css">
    <link rel="stylesheet" href="../css/ui-kit.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="icon" type="image/svg+xml" href="https://raw.githubusercontent.com/heylynncontact-cpu/claque-doigts/main/assets/icons/Favicon.svg">
</head>
<body>
    <header style="background: white; padding: 16px 24px; border-bottom: 1px solid #D8D8D8;">
        <div style="max-width: 1200px; margin: 0 auto; display: flex; justify-content: center; align-items: center;">
            <img src="https://raw.githubusercontent.com/heylynncontact-cpu/claque-doigts/main/assets/icons/Lettermark.svg" alt="Claque Doigts" style="height: 32px;">
        </div>
    </header>
    
    <div class="split-layout">
        <div class="split-layout-content">
            <div class="home-content">
                <span class="badge badge-pink" style="margin-bottom: 16px;">VERSION GRATUITE</span>
                <h1 class="home-title" style="margin-top: 0;">
                    <img src="https://raw.githubusercontent.com/heylynncontact-cpu/claque-doigts/main/assets/icons/Element.svg" alt="" style="width: 32px; height: 32px; margin-right: 16px;">
                    Avant de commencer...
                </h1>
                <p class="home-description">
                    Pour vous offrir une expérience personnalisée, nous avons besoin de quelques informations.
                </p>
                
                <form id="free-version-form" style="max-width: 500px; margin-top: 32px;">
                    <div class="form-group">
                        <label class="form-label" for="prenom">Prénom <span style="color: #FF4D4D;">*</span></label>
                        <input type="text" class="input-field" id="prenom" placeholder="Votre prénom" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="nom">Nom <span style="color: #FF4D4D;">*</span></label>
                        <input type="text" class="input-field" id="nom" placeholder="Votre nom" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="entreprise">Entreprise <span style="color: #999; font-size: 13px;">(optionnel)</span></label>
                        <input type="text" class="input-field" id="entreprise" placeholder="Nom de votre entreprise">
                    </div>
                    
                    <button type="submit" class="btn btn-green btn-big" style="margin-top: 24px;">Commencer ma stratégie gratuite</button>
                </form>
            </div>
        </div>
        <div class="split-layout-gradient" style="background: url('https://raw.githubusercontent.com/heylynncontact-cpu/claque-doigts/main/assets/images/IMG1.jpg') no-repeat center center; background-size: cover; min-height: calc(100vh - 80px);"></div>
    </div>
    
    <footer class="footer" style="padding: 12px 0; margin-top: 0; border-top: 1px solid #D8D8D8;">
        <div class="footer-content" style="font-size: 14px; display: flex; justify-content: center; align-items: center; gap: 16px;">
            <span>© 2025 Claque Doigts - Tous droits réservés</span>
            <span>|</span>
            <a href="./mentions-legales.html" style="color: #1A1A1A; text-decoration: none;">Mentions légales</a>
        </div>
    </footer>
    
    <script src="../js/firebase-config.js"></script>
    <script>
        document.getElementById("free-version-form").addEventListener("submit", async function(e) {
            e.preventDefault();
            
            const prenom = document.getElementById("prenom").value.trim();
            const nom = document.getElementById("nom").value.trim();
            const entreprise = document.getElementById("entreprise").value.trim();
            
            // Validation
            if (!prenom || !nom) {
                alert("Veuillez renseigner votre prénom et votre nom");
                return;
            }
            
            // Créer un client temporaire avec les vraies données
            const tempClientId = "temp_" + Date.now();
            const tempClient = {
                id: tempClientId,
                prenom: prenom,
                nom: nom,
                entreprise: entreprise || "Non renseigné",
                email: "",
                telephone: "",
                createdAt: new Date().toISOString(),
                completed: false,
                isTemporary: true
            };
            
            // Sauvegarder si storage est disponible
            if (typeof storage !== 'undefined') {
                try {
                    await storage.save("clients", tempClientId, tempClient);
                } catch (error) {
                    console.log("Storage non disponible, sauvegarde en localStorage uniquement");
                }
            }
            
            // Sauvegarder également en localStorage
            localStorage.setItem("temp_client_" + tempClientId, JSON.stringify(tempClient));
            localStorage.setItem("current_client_id", tempClientId);
            localStorage.setItem("is_free_version", "true");
            
            // Rediriger vers la première étape
            window.location.href = "./cibles-intro.html";
        });
    </script>
</body>
</html>
